<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <script src="libs/vue.js"></script>
    <script src="sdd-load.js"></script>
    <script src="tree-menu.js"></script>
    <script src="index.js"></script>
    <div id="app" class="vertical-flexbox lightgrey-background">
        <nav class="topbar centered medium-margin-vertical">
            <div class="selector" v-for="tab, index in tabs">
                <input v-model="selectedTab" :id="'tab-radio-' + index" class="selector-radio" name="tab-radio" :value="index" type="radio" />
                <label class="selector-label" :for="'tab-radio-' + index">
                    {{ tab }}
                </label>
            </div>
        </nav>
        <div class="horizontal-flexbox flex-grow-1 scroll">
            <nav class="sidebar scroll medium-margin thin-border white-background">
                <tree-menu v-if="selectedTab == 0" :items="itemsHierarchy" name="item" v-model="selectedItem" v-on:add-item="addItem">
                </tree-menu>
                <tree-menu v-if="selectedTab == 1" v-model="selectedDescription" :items="descriptionsHierarchy" name="description" v-on:add-item="addDescription">
                </tree-menu>
            </nav>
            <section class="content flex-grow-1 medium-margin thin-border white-background scroll">
                <div v-if="selectedTab == 0 && items[selectedItem] !== undefined" class="horizontal-flexbox start-aligned">
                    <img class="item-img" :src="items[selectedItem].photo"><br/>
                    <div class="">
                        <label class="item-property">Name</label>
                        <input type="text" v-model="items[selectedItem].name" /><br/>
        
                        <label class="item-property">Detail</label>
                        <textarea v-model="items[selectedItem].detail"></textarea><br/>
                        
                        <label class="item-property">Photo</label>
                        <input type="text" v-model="items[selectedItem].photo" /><br/>
        
                        <label class="item-property">Description</label>
                        <ul class="indented">
                            <li v-for="description, index in descriptions">
                                <label>{{ description.name }}</label>
                                <div v-for="state, stateIndex in description.states">
                                    <input :id="'descriptor-' + stateIndex" :name="'item-state-' + index" type="radio" />
                                    <label :for="'descriptor-' + stateIndex">
                                        {{ state.name }}
                                    </label>
                                </div>

                            </li>
                        </ul>
                    </div>
                </div>
                <ul v-if="selectedTab == 1 && descriptions[selectedDescription] !== undefined">
                    <label class="description-name">Name</label>
                    <input type="text" v-model="descriptions[selectedDescription].name" /><br/>
                    <div v-if="descriptions[selectedDescription].inapplicableStates.length > 0">
                        <label>Inapplicable If</label>
                        <ul class="indented">
                            <li class="medium-padding" v-for="state in descriptions[selectedDescription].inapplicableStates">
                                {{ state.descriptor.name }} IS {{ state.name }}
                            </li>
                        </ul>
                    </div>
                    <label>States</label>
                    <ul class="indented">
                        <li class="medium-padding" v-for="state in descriptions[selectedDescription].states">
                            {{ state.name }}
                        </li>
                        <li>
                            <input type="text" />
                            <button class="background-color-1" v-on:click="addState(descriptions[selectedDescription], $event)">Add</button>
                        </li>
                    </ul>
                </ul>
            </section>
        </div>
        <section class="medium-margin">
            <button type="button" v-on:click="saveData">Save</button>
            <button type="button" v-on:click="resetData">Reset</button>
            <button type="button" v-on:click="importData">Import</button>
            <input class="invisible" v-on:change="fileUpload" type="file" accept="application/xml" name="import-data" id="import-data">
            <button type="button" v-on:click="exportData">Export</button>
        </section>
    </div>
</body>
</html>